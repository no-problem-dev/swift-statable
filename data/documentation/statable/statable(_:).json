{"sections":[],"variants":[{"paths":["\/documentation\/statable\/statable(_:)"],"traits":[{"interfaceLanguage":"swift"}]}],"kind":"symbol","hierarchy":{"paths":[["doc:\/\/Statable\/documentation\/Statable"]]},"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Statable\/documentation\/Statable\/Statable(_:)"},"metadata":{"modules":[{"name":"Statable"}],"externalID":"s:8StatableAAyyxmcs8SendableRzlufm","role":"symbol","symbolKind":"macro","title":"Statable(_:)","roleHeading":"Macro","fragments":[{"text":"macro","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Statable","kind":"identifier"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"T","kind":"typeIdentifier"},{"text":".Type)","kind":"text"}]},"schemaVersion":{"major":0,"minor":3,"patch":0},"abstract":[{"text":"単一の非同期状態を管理するストアクラスを定義するマクロ","type":"text"}],"seeAlsoSections":[{"title":"@Statable マクロ","identifiers":["doc:\/\/Statable\/documentation\/Statable\/Statable(_:operations:)"],"generated":true,"anchor":"Statable-マクロ"}],"primaryContentSections":[{"kind":"declarations","declarations":[{"tokens":[{"kind":"attribute","text":"@attached"},{"kind":"text","text":"(member, names: named(_asyncValue), named(_operations), named(value), named(state), named(isLoading), named(isIdle), named(isFailed), named(hasValue), named(error), named(operations), named(set), named(setError), named(startLoading), named(reset), named(load), named(loadIfNeeded), named(reload)) "},{"kind":"attribute","text":"@attached"},{"kind":"text","text":"(extension, conformances: "},{"kind":"typeIdentifier","text":"Statable","preciseIdentifier":"s:8StatableAAP","identifier":"doc:\/\/Statable\/documentation\/Statable\/Statable"},{"kind":"text","text":", "},{"kind":"typeIdentifier","text":"Sendable","preciseIdentifier":"s:s8SendableP"},{"kind":"text","text":") "},{"kind":"keyword","text":"macro"},{"kind":"text","text":" "},{"kind":"identifier","text":"Statable"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"_","kind":"externalParam"},{"text":" ","kind":"text"},{"text":"valueType","kind":"internalParam"},{"text":": ","kind":"text"},{"text":"T","kind":"typeIdentifier"},{"text":".Type) ","kind":"text"},{"text":"where","kind":"keyword"},{"text":" ","kind":"text"},{"text":"T","kind":"typeIdentifier"},{"text":" : ","kind":"text"},{"preciseIdentifier":"s:s8SendableP","text":"Sendable","kind":"typeIdentifier"}],"languages":["swift"],"platforms":["macOS"]}]},{"kind":"content","content":[{"type":"heading","level":2,"anchor":"overview","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"クラスに AsyncValue のラッパー機能を自動生成し、"},{"type":"text","text":" "},{"type":"codeVoice","code":"Statable"},{"type":"text","text":", "},{"type":"codeVoice","code":"Sendable"},{"type":"text","text":" プロトコルへの準拠を追加します。"}]},{"type":"heading","level":2,"anchor":"%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9","text":"基本的な使い方"},{"type":"codeListing","syntax":"swift","code":["@Statable(MetabolicProfile.self)","@MainActor @Observable","final class ProfileStore {","    \/\/ カスタム computed properties","    var currentAge: Int { value?.age() ?? 0 }","}"]},{"text":"操作トラッキング付きの使い方","anchor":"%E6%93%8D%E4%BD%9C%E3%83%88%E3%83%A9%E3%83%83%E3%82%AD%E3%83%B3%E3%82%B0%E4%BB%98%E3%81%8D%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9","type":"heading","level":2},{"type":"codeListing","syntax":"swift","code":["enum WorkoutOperation: String, CaseIterable, Sendable {","    case fetch, record, delete","}","","@Statable([WorkoutActivity].self, operations: WorkoutOperation.self)","@MainActor @Observable","final class WorkoutStore {","    \/\/ operations.isActive(.fetch), operations.run(.record) { ... } などが使える","}"]},{"text":"生成されるメンバー","anchor":"%E7%94%9F%E6%88%90%E3%81%95%E3%82%8C%E3%82%8B%E3%83%A1%E3%83%B3%E3%83%90%E3%83%BC","type":"heading","level":2},{"anchor":"AsyncValue%E9%96%A2%E9%80%A3","level":3,"text":"AsyncValue関連","type":"heading"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"code":"value: T?","type":"codeVoice"},{"text":" - 現在の値","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"state: AsyncState<T>","type":"codeVoice"},{"text":" - 状態（switch用）","type":"text"}]}]},{"content":[{"inlineContent":[{"code":"isLoading: Bool","type":"codeVoice"},{"type":"text","text":" - ローディング中か"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"hasValue: Bool","type":"codeVoice"},{"type":"text","text":" - 値が存在するか"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"error: StateError?","type":"codeVoice"},{"text":" - エラー","type":"text"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"set(_:)"},{"type":"text","text":" - 値を設定"}],"type":"paragraph"}]},{"content":[{"inlineContent":[{"code":"setError(_:)","type":"codeVoice"},{"type":"text","text":" - エラーを設定"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"startLoading()"},{"type":"text","text":" - ローディング開始"}]}]},{"content":[{"inlineContent":[{"type":"codeVoice","code":"reset()"},{"type":"text","text":" - 初期状態にリセット"}],"type":"paragraph"}]},{"content":[{"type":"paragraph","inlineContent":[{"code":"load(_:)","type":"codeVoice"},{"text":" - 非同期操作を実行","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"loadIfNeeded(_:)"},{"text":" - 値がない場合のみロード","type":"text"}]}]},{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"reload(_:)"},{"type":"text","text":" - 強制リロード"}]}]}],"type":"unorderedList"},{"level":3,"type":"heading","anchor":"OperationTracker%E9%96%A2%E9%80%A3operations%E5%BC%95%E6%95%B0%E6%8C%87%E5%AE%9A%E6%99%82%E3%81%AE%E3%81%BF","text":"OperationTracker関連（operations引数指定時のみ）"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"operations: OperationTracker<Op>"},{"type":"text","text":" - トラッカーインスタンス"}]}]}],"type":"unorderedList"},{"text":"View側での使用","anchor":"View%E5%81%B4%E3%81%A7%E3%81%AE%E4%BD%BF%E7%94%A8","type":"heading","level":2},{"syntax":"swift","code":["\/\/ 値へのアクセス","if let profile = store.value {","    Text(profile.name)","}","","\/\/ 状態でswitch","switch store.state {","case .idle:","    Text(\"未取得\")","case .loading(let prev):","    ProgressView()","case .loaded(let profile):","    ProfileView(profile: profile)","case .failed(let error):","    ErrorView(error: error)","}","","\/\/ 操作（operations付きの場合）","if store.operations.isActive(.fetch) {","    ProgressView()","}","await store.operations.run(.record) {","    try await api.record(workout)","}"],"type":"codeListing"}]}],"references":{"doc://Statable/documentation/Statable":{"url":"\/documentation\/statable","kind":"symbol","title":"Statable","identifier":"doc:\/\/Statable\/documentation\/Statable","role":"collection","type":"topic","abstract":[{"type":"text","text":"SwiftUI向けの宣言的な状態管理マクロライブラリ。"}]},"doc://Statable/documentation/Statable/Statable(_:operations:)":{"fragments":[{"text":"macro","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Statable","kind":"identifier"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":", ","kind":"text"},{"text":"Op","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"T","kind":"typeIdentifier"},{"text":".Type, ","kind":"text"},{"text":"operations","kind":"externalParam"},{"text":": ","kind":"text"},{"text":"Op","kind":"typeIdentifier"},{"text":".Type)","kind":"text"}],"role":"symbol","type":"topic","kind":"symbol","url":"\/documentation\/statable\/statable(_:operations:)","abstract":[{"type":"text","text":"操作トラッキング付きの@Statable"}],"identifier":"doc:\/\/Statable\/documentation\/Statable\/Statable(_:operations:)","title":"Statable(_:operations:)"},"doc://Statable/documentation/Statable/Statable":{"navigatorTitle":[{"text":"Statable","kind":"identifier"}],"fragments":[{"text":"protocol","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Statable","kind":"identifier"}],"type":"topic","url":"\/documentation\/statable\/statable","title":"Statable","abstract":[{"text":"状態コンテナとして振る舞うための基本プロトコル","type":"text"}],"identifier":"doc:\/\/Statable\/documentation\/Statable\/Statable","kind":"symbol","role":"symbol"},"doc://Statable/documentation/Statable/Statable(_:)":{"kind":"symbol","type":"topic","identifier":"doc:\/\/Statable\/documentation\/Statable\/Statable(_:)","title":"Statable(_:)","role":"symbol","fragments":[{"text":"macro","kind":"keyword"},{"text":" ","kind":"text"},{"text":"Statable","kind":"identifier"},{"text":"<","kind":"text"},{"text":"T","kind":"genericParameter"},{"text":">(","kind":"text"},{"text":"T","kind":"typeIdentifier"},{"text":".Type)","kind":"text"}],"abstract":[{"text":"単一の非同期状態を管理するストアクラスを定義するマクロ","type":"text"}],"url":"\/documentation\/statable\/statable(_:)"}}}