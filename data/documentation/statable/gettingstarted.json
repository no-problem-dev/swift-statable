{"schemaVersion":{"major":0,"minor":3,"patch":0},"kind":"article","abstract":[{"text":"Statableを使って非同期状態を管理する基本的な方法を学びます。","type":"text"}],"identifier":{"interfaceLanguage":"swift","url":"doc:\/\/Statable\/documentation\/Statable\/GettingStarted"},"metadata":{"modules":[{"name":"Statable"}],"title":"はじめに","roleHeading":"Article","role":"article"},"sections":[],"variants":[{"paths":["\/documentation\/statable\/gettingstarted"],"traits":[{"interfaceLanguage":"swift"}]}],"primaryContentSections":[{"content":[{"level":2,"anchor":"Overview","type":"heading","text":"Overview"},{"type":"paragraph","inlineContent":[{"type":"text","text":"Statableは、SwiftUIアプリケーションで非同期状態を型安全に管理するためのライブラリです。"},{"type":"text","text":" "},{"type":"codeVoice","code":"@Statable"},{"type":"text","text":"マクロにより、状態管理のボイラープレートを大幅に削減できます。"}]},{"level":2,"anchor":"%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB","type":"heading","text":"インストール"},{"level":3,"anchor":"Swift-Package-Manager","type":"heading","text":"Swift Package Manager"},{"type":"paragraph","inlineContent":[{"type":"codeVoice","code":"Package.swift"},{"text":"に以下を追加してください：","type":"text"}]},{"syntax":"swift","type":"codeListing","code":["dependencies: [","    .package(url: \"https:\/\/github.com\/no-problem-dev\/swift-statable.git\", from: \"1.0.0\")","]"]},{"type":"paragraph","inlineContent":[{"text":"ターゲットに追加：","type":"text"}]},{"syntax":"swift","type":"codeListing","code":[".target(","    name: \"YourTarget\",","    dependencies: [","        .product(name: \"Statable\", package: \"swift-statable\")","    ]",")"]},{"type":"heading","anchor":"%E5%9F%BA%E6%9C%AC%E7%9A%84%E3%81%AA%E4%BD%BF%E3%81%84%E6%96%B9","level":2,"text":"基本的な使い方"},{"type":"heading","anchor":"Store%E3%81%AE%E5%AE%9A%E7%BE%A9","level":3,"text":"Storeの定義"},{"type":"paragraph","inlineContent":[{"code":"@Statable","type":"codeVoice"},{"text":"マクロを使用してStoreを定義します：","type":"text"}]},{"type":"codeListing","syntax":"swift","code":["import Statable","","@Statable(UserProfile.self)","@MainActor @Observable","final class ProfileStore {","    public init() {}","}"]},{"type":"paragraph","inlineContent":[{"type":"text","text":"このマクロにより、以下のプロパティとメソッドが自動生成されます："}]},{"type":"table","header":"row","rows":[[[{"inlineContent":[{"text":"プロパティ","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"型","type":"text"}],"type":"paragraph"}],[{"inlineContent":[{"text":"説明","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"value"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"T?"}],"type":"paragraph"}],[{"inlineContent":[{"text":"現在の値","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"state","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"code":"AsyncState<T>","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"text":"状態（switch用）","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"isLoading"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"Bool"}],"type":"paragraph"}],[{"inlineContent":[{"text":"ローディング中か","type":"text"}],"type":"paragraph"}]],[[{"inlineContent":[{"type":"codeVoice","code":"hasValue"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"Bool"}],"type":"paragraph"}],[{"inlineContent":[{"type":"text","text":"値が存在するか"}],"type":"paragraph"}]],[[{"inlineContent":[{"code":"error","type":"codeVoice"}],"type":"paragraph"}],[{"inlineContent":[{"type":"codeVoice","code":"StateError?"}],"type":"paragraph"}],[{"inlineContent":[{"text":"エラー","type":"text"}],"type":"paragraph"}]]]},{"type":"heading","text":"データのロード","level":3,"anchor":"%E3%83%87%E3%83%BC%E3%82%BF%E3%81%AE%E3%83%AD%E3%83%BC%E3%83%89"},{"code":["\/\/ 非同期操作を実行","await store.load {","    try await api.fetchProfile()","}","","\/\/ 値がない場合のみロード","await store.loadIfNeeded {","    try await api.fetchProfile()","}","","\/\/ 強制リロード","await store.reload {","    try await api.fetchProfile()","}"],"type":"codeListing","syntax":"swift"},{"type":"heading","text":"Viewでの使用","level":3,"anchor":"View%E3%81%A7%E3%81%AE%E4%BD%BF%E7%94%A8"},{"code":["struct ProfileView: View {","    @Environment(ProfileStore.self) private var store","","    var body: some View {","        VStack {","            switch store.state {","            case .idle:","                Text(\"データ未取得\")","                Button(\"取得\") {","                    Task {","                        await store.load {","                            try await api.fetchProfile()","                        }","                    }","                }","","            case .loading(let previous):","                ProgressView()","                if let prev = previous {","                    Text(\"前回: \\(prev.name)\")","                        .foregroundStyle(.secondary)","                }","","            case .loaded(let profile):","                Text(\"こんにちは、\\(profile.name)さん\")","","            case .failed(let error):","                VStack {","                    Text(\"エラー: \\(error.message)\")","                    Button(\"再試行\") {","                        Task { await store.reload { try await api.fetchProfile() } }","                    }","                }","            }","        }","    }","}"],"type":"codeListing","syntax":"swift"},{"type":"heading","text":"操作トラッキング","level":2,"anchor":"%E6%93%8D%E4%BD%9C%E3%83%88%E3%83%A9%E3%83%83%E3%82%AD%E3%83%B3%E3%82%B0"},{"type":"paragraph","inlineContent":[{"text":"複数の操作を個別に追跡する場合は、","type":"text"},{"code":"operations","type":"codeVoice"},{"text":"パラメータを使用します：","type":"text"}]},{"code":["enum DataOperation: String, CaseIterable, Sendable {","    case fetch, save, delete","}","","@Statable([Item].self, operations: DataOperation.self)","@MainActor @Observable","final class ItemStore {","    public init() {}","","    var isSaving: Bool {","        operations.isActive(.save)","    }","}"],"type":"codeListing","syntax":"swift"},{"type":"paragraph","inlineContent":[{"type":"text","text":"詳細は "},{"type":"reference","identifier":"doc:\/\/Statable\/documentation\/Statable\/OperationTrackerGuide","isActive":true},{"type":"text","text":" を参照してください。"}]},{"type":"heading","text":"次のステップ","level":2,"anchor":"%E6%AC%A1%E3%81%AE%E3%82%B9%E3%83%86%E3%83%83%E3%83%97"},{"items":[{"content":[{"type":"paragraph","inlineContent":[{"identifier":"doc:\/\/Statable\/documentation\/Statable\/AsyncStateGuide","type":"reference","isActive":true},{"type":"text","text":": AsyncStateの詳細な使い方"}]}]},{"content":[{"inlineContent":[{"identifier":"doc:\/\/Statable\/documentation\/Statable\/OperationTrackerGuide","isActive":true,"type":"reference"},{"text":": 複数操作の追跡方法","type":"text"}],"type":"paragraph"}]}],"type":"unorderedList"}],"kind":"content"}],"hierarchy":{"paths":[["doc:\/\/Statable\/documentation\/Statable"]]},"references":{"doc://Statable/documentation/Statable":{"url":"\/documentation\/statable","kind":"symbol","title":"Statable","identifier":"doc:\/\/Statable\/documentation\/Statable","role":"collection","type":"topic","abstract":[{"type":"text","text":"SwiftUI向けの宣言的な状態管理マクロライブラリ。"}]},"doc://Statable/documentation/Statable/AsyncStateGuide":{"kind":"article","type":"topic","title":"AsyncState ガイド","role":"article","identifier":"doc:\/\/Statable\/documentation\/Statable\/AsyncStateGuide","url":"\/documentation\/statable\/asyncstateguide","abstract":[{"type":"text","text":"排他的な非同期状態表現の詳細な使い方を学びます。"}]},"doc://Statable/documentation/Statable/OperationTrackerGuide":{"identifier":"doc:\/\/Statable\/documentation\/Statable\/OperationTrackerGuide","type":"topic","role":"article","kind":"article","url":"\/documentation\/statable\/operationtrackerguide","title":"OperationTracker ガイド","abstract":[{"type":"text","text":"複数の並行操作を個別に追跡する方法を学びます。"}]}}}